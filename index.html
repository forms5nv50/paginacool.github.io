<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/login.css">
</head>
<body class="text-center">

<main class="form-signin">
    <img class="mb-4" src="assets/images/JimeCoding.jpg" id="user_image" alt="" width="100" height="100">
    <h1 class="h3 mb-3 fw-normal" id="user_name">Acceso</h1>

    <!-- Botón de inicio de sesión de Google -->
    <button onclick="loginWithGoogle()" class="w-100 btn btn-lg btn-danger">Iniciar con Google</button>
    
    <!-- Botón de inicio de sesión de Facebook -->
    <button onclick="loginFacebook()" class="w-100 btn btn-lg btn-primary mt-2">Iniciar con Facebook</button>
    
    <!-- Botón de cerrar sesión -->
    <button onclick="logout()" style="display: none;" class="w-100 btn btn-lg btn-secondary mt-2" id="logout_btn">Salir</button>
</main>

<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-firestore.js"></script>

<script type="text/javascript">
const firebaseConfig = {
    apiKey: "AIzaSyBTLWz3otqAVPaLtaEH4-8Y1pdPwvimy44",
    authDomain: "evaluacion-3er.firebaseapp.com",
    projectId: "evaluacion-3er",
    storageBucket: "evaluacion-3er.appspot.com",
    messagingSenderId: "349123214637",
    appId: "1:349123214637:web:9cc6c6d2135beb9253e7a4"
};

firebase.initializeApp(firebaseConfig);

var login_btn = document.getElementById("login_btn");
var logout_btn = document.getElementById("logout_btn");
var user_image = document.getElementById("user_image");
var user_name_h1 = document.getElementById("user_name");

var loginWithGoogle = function() {
    var provider = new firebase.auth.GoogleAuthProvider();
    firebase.auth().signInWithPopup(provider).then(function(result) {
        var token = result.credential.accessToken;
        var user = result.user;
        updateUser(user);
    }).catch(function(error) {
        console.log(error.message);
    });
};

var loginFacebook = function() {
    var provider = new firebase.auth.FacebookAuthProvider();
    firebase.auth().signInWithPopup(provider).then(function(result) {
        var token = result.credential.accessToken;
        var user = result.user;
        updateUser(user);
    }).catch(function(error) {
        console.log(error.message);
    });
};

var logout = function() {
    firebase.auth().signOut().then(function() {
        user_name_h1.innerHTML = "Acceso";
        user_image.src = "assets/images/JimeCoding.jpg";
        login_btn.style.display = "inline-block";
        logout_btn.style.display = "none";
    }).catch(function(error) {
        console.log(error.message);
    });
};

var updateUser = function(user) {
    user_name_h1.innerHTML = "Hola, " + user.displayName;
    user_image.src = user.photoURL;
    login_btn.style.display = "none";
    logout_btn.style.display = "inline-block";
};
</script>

</body>
</html>
